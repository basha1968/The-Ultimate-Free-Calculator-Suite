<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Present Value Calculator | FinTech Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --primary: #1a1f36;
            --secondary: #2a2f46;
            --accent: #6366f1;
            --accent-light: #818cf8;
            --text: #e2e8f0;
            --text-secondary: #94a3b8;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --card-bg: rgba(30, 33, 58, 0.8);
            --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f172a, #1e293b);
            color: var(--text);
            min-height: 100vh;
            padding: 2rem 1rem;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 1.5rem 0;
            margin-bottom: 1.5rem;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .logo-icon {
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            width: 60px;
            height: 60px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 6px rgba(99, 102, 241, 0.3);
        }

        .logo-icon i {
            font-size: 2rem;
            color: white;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--accent-light), #a5b4fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.7;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        @media (max-width: 900px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px -10px rgba(0, 0, 0, 0.4);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .card-header i {
            font-size: 1.8rem;
            margin-right: 1rem;
            color: var(--accent-light);
            background: rgba(99, 102, 241, 0.1);
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-title {
            font-size: 1.6rem;
            font-weight: 600;
            color: var(--text);
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.75rem;
            font-weight: 500;
            font-size: 1.05rem;
            color: var(--text);
            display: flex;
            align-items: center;
        }

        label i {
            margin-right: 0.5rem;
            color: var(--accent-light);
            font-size: 1.1rem;
        }

        .input-with-info {
            position: relative;
        }

        input, select {
            width: 100%;
            padding: 1rem 1.25rem;
            border-radius: 12px;
            border: none;
            background: rgba(17, 24, 39, 0.6);
            color: var(--text);
            font-size: 1.1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
            background: rgba(17, 24, 39, 0.8);
        }

        input[type="range"] {
            padding: 0;
            height: 8px;
            -webkit-appearance: none;
            background: rgba(17, 24, 39, 0.6);
            border-radius: 10px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
        }

        .range-value {
            display: inline-block;
            background: rgba(99, 102, 241, 0.15);
            color: var(--accent-light);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            margin-left: 0.75rem;
            font-size: 0.9rem;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 1rem;
        }

        .checkbox-group input {
            width: auto;
            margin-right: 0.75rem;
            accent-color: var(--accent);
        }

        .checkbox-group label {
            margin-bottom: 0;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 1rem 1.75rem;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            text-decoration: none;
            gap: 0.75rem;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px -5px rgba(99, 102, 241, 0.5);
            background: linear-gradient(135deg, var(--accent-light), #a5b4fc);
        }

        .btn-block {
            display: flex;
            width: 100%;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--accent);
            color: var(--accent-light);
        }

        .btn-outline:hover {
            background: rgba(99, 102, 241, 0.1);
        }

        .result-container {
            background: linear-gradient(135deg, rgba(30, 33, 58, 0.6), rgba(56, 60, 94, 0.6));
            border-radius: 16px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid rgba(99, 102, 241, 0.2);
        }

        .result-label {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .result-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--success);
            text-shadow: 0 2px 10px rgba(16, 185, 129, 0.2);
        }

        .chart-container {
            height: 280px;
            margin-top: 1.5rem;
        }

        .export-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .security-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .security-card {
            background: rgba(17, 24, 39, 0.5);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .security-icon {
            background: rgba(99, 102, 241, 0.15);
            color: var(--accent-light);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .security-content h3 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .security-content p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .ad-container {
            background: linear-gradient(135deg, rgba(30, 33, 58, 0.6), rgba(56, 60, 94, 0.6));
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            margin: 2rem 0;
            border: 1px dashed var(--accent);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .ad-label {
            display: inline-block;
            background: rgba(99, 102, 241, 0.2);
            color: var(--accent-light);
            padding: 0.5rem 1.25rem;
            border-radius: 20px;
            margin-bottom: 1.25rem;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .ad-content {
            width: 100%;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: var(--text-secondary);
            gap: 0.5rem;
        }

        .ad-content i {
            font-size: 2rem;
            color: var(--accent);
            opacity: 0.7;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .feature {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .feature i {
            font-size: 1.8rem;
            color: var(--accent-light);
            margin-top: 0.25rem;
        }

        .feature-content h3 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .feature-content p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        footer {
            text-align: center;
            padding: 2rem 0 1rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.08);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .footer-links a:hover {
            color: var(--accent-light);
        }

        .disclaimer {
            background: rgba(239, 68, 68, 0.1);
            border-radius: 12px;
            padding: 1.25rem;
            margin-top: 2rem;
            border-left: 4px solid var(--danger);
        }

        .disclaimer p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.7;
        }

        .disclaimer strong {
            color: var(--danger);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .result-value {
                font-size: 2rem;
            }
            
            .card {
                padding: 1.5rem;
            }
        }
        
        .error-message {
            color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
            display: none;
            border-left: 4px solid var(--danger);
        }
        
        .slider-container {
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
        }
        
        .slider-container input[type="range"] {
            flex: 1;
            margin-right: 1rem;
        }
        
        .discount-factor {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-light);
            text-shadow: 0 2px 10px rgba(99, 102, 241, 0.2);
        }
        
        .calc-details {
            margin-top: 1.5rem;
            background: rgba(17, 24, 39, 0.3);
            border-radius: 12px;
            padding: 1.25rem;
        }
        
        .calc-details h3 {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            color: var(--accent-light);
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .detail-label {
            color: var(--text-secondary);
        }
        
        .detail-value {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-calculator"></i>
                </div>
                <div>
                    <h1>Professional Present Value Calculator</h1>
                    <p class="subtitle">Advanced financial tool for calculating present value with precision. Secure, compliant, and designed for financial professionals.</p>
                </div>
            </div>
        </header>
        
        <div class="ad-container">
            <span class="ad-label">Adsterra Premium Ad Placement</span>
            <div class="ad-content">
                <i class="fas fa-ad"></i>
                <p>728x90 Leaderboard Banner</p>
                <small>Ad space for Adsterra integration</small>
            </div>
        </div>
        
        <div class="main-grid">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-sliders-h"></i>
                    <h2 class="card-title">Calculation Parameters</h2>
                </div>
                
                <div class="input-group">
                    <label for="future-value"><i class="fas fa-dollar-sign"></i> Future Value</label>
                    <div class="input-with-info">
                        <input type="number" id="future-value" placeholder="Enter future amount" min="1" value="25000">
                    </div>
                    <div class="slider-container">
                        <input type="range" id="future-value-slider" min="1000" max="100000" step="1000" value="25000">
                        <span class="range-value" id="future-value-display">$25,000</span>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="interest-rate"><i class="fas fa-percentage"></i> Annual Interest Rate</label>
                    <div class="input-with-info">
                        <input type="number" id="interest-rate" placeholder="Enter annual rate" step="0.1" min="0" max="50" value="6.5">
                    </div>
                    <div class="slider-container">
                        <input type="range" id="interest-rate-slider" min="0" max="20" step="0.1" value="6.5">
                        <span class="range-value" id="interest-rate-display">6.5%</span>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="time-period"><i class="fas fa-clock"></i> Time Period</label>
                    <div class="input-with-info">
                        <input type="number" id="time-period" placeholder="Enter number of years" min="1" max="50" value="7">
                    </div>
                    <div class="slider-container">
                        <input type="range" id="time-period-slider" min="1" max="30" step="1" value="7">
                        <span class="range-value" id="time-period-display">7 years</span>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="compounding"><i class="fas fa-redo"></i> Compounding Frequency</label>
                    <select id="compounding">
                        <option value="1">Annual</option>
                        <option value="2">Semi-Annual</option>
                        <option value="4" selected>Quarterly</option>
                        <option value="12">Monthly</option>
                        <option value="365">Daily</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="inflation-adjust" checked>
                        <label for="inflation-adjust">Adjust for Inflation</label>
                    </div>
                </div>
                
                <div class="input-group" id="inflation-section">
                    <label for="inflation-rate"><i class="fas fa-chart-line"></i> Expected Inflation Rate</label>
                    <div class="input-with-info">
                        <input type="number" id="inflation-rate" placeholder="Enter expected inflation" step="0.1" min="0" max="20" value="2.5">
                    </div>
                    <div class="slider-container">
                        <input type="range" id="inflation-rate-slider" min="0" max="10" step="0.1" value="2.5">
                        <span class="range-value" id="inflation-rate-display">2.5%</span>
                    </div>
                </div>
                
                <div class="error-message" id="error-message">
                    <i class="fas fa-exclamation-circle"></i> Please enter valid values for all fields. Interest rate and time period must be positive numbers.
                </div>
                
                <button class="btn btn-block" id="calculate-btn">
                    <i class="fas fa-calculator"></i> Calculate Present Value
                </button>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-chart-bar"></i>
                    <h2 class="card-title">Results & Analysis</h2>
                </div>
                
                <div class="result-container">
                    <div>
                        <div class="result-label">Present Value</div>
                        <div class="result-value" id="present-value">$15,372.18</div>
                    </div>
                    <div>
                        <div class="result-label">Discount Factor</div>
                        <div class="discount-factor" id="discount-factor">0.6149</div>
                    </div>
                </div>
                
                <div class="calc-details">
                    <h3><i class="fas fa-info-circle"></i> Calculation Details</h3>
                    <div class="detail-row">
                        <span class="detail-label">Effective Annual Rate:</span>
                        <span class="detail-value" id="effective-rate">6.66%</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Compounding Periods:</span>
                        <span class="detail-value" id="compounding-periods">28</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Real Interest Rate:</span>
                        <span class="detail-value" id="real-rate">3.90%</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Inflation Adjusted:</span>
                        <span class="detail-value" id="inflation-status">Yes</span>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="pv-chart"></canvas>
                </div>
                
                <div class="export-section">
                    <button class="btn" id="print-btn">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button class="btn" id="pdf-btn">
                        <i class="fas fa-file-pdf"></i> PDF
                    </button>
                    <button class="btn" id="excel-btn">
                        <i class="fas fa-file-excel"></i> Excel
                    </button>
                    <button class="btn" id="share-btn">
                        <i class="fas fa-share-alt"></i> Share
                    </button>
                </div>
            </div>
        </div>
        
        <div class="security-section">
            <div class="security-card">
                <div class="security-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <div class="security-content">
                    <h3>Bank-Level Security</h3>
                    <p>All calculations are performed locally in your browser. No financial data is ever transmitted or stored.</p>
                </div>
            </div>
            
            <div class="security-card">
                <div class="security-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="security-content">
                    <h3>GDPR Compliant</h3>
                    <p>Fully compliant with international privacy regulations. Your data remains yours alone.</p>
                </div>
            </div>
            
            <div class="security-card">
                <div class="security-icon">
                    <i class="fas fa-user-secret"></i>
                </div>
                <div class="security-content">
                    <h3>Zero Data Retention</h3>
                    <p>We don't store any of your financial inputs. All data is cleared when you close the browser.</p>
                </div>
            </div>
        </div>
        
        <div class="ad-container">
            <span class="ad-label">Yllix Advertising Space</span>
            <div class="ad-content">
                <i class="fas fa-rectangle-ad"></i>
                <p>Responsive Ad Placement</p>
                <small>Ad space for Yllix integration</small>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <i class="fas fa-star"></i>
                <h2 class="card-title">Key Features</h2>
            </div>
            
            <div class="features-grid">
                <div class="feature">
                    <i class="fas fa-cogs"></i>
                    <div class="feature-content">
                        <h3>Advanced Calculation</h3>
                        <p>Precise present value calculations with support for various compounding frequencies and inflation adjustments.</p>
                    </div>
                </div>
                
                <div class="feature">
                    <i class="fas fa-mobile-alt"></i>
                    <div class="feature-content">
                        <h3>Fully Responsive</h3>
                        <p>Works seamlessly on all devices from desktop to mobile with an optimized user experience.</p>
                    </div>
                </div>
                
                <div class="feature">
                    <i class="fas fa-file-export"></i>
                    <div class="feature-content">
                        <h3>Export Capabilities</h3>
                        <p>Export results in multiple formats including PDF, Excel, and CSV for further analysis.</p>
                    </div>
                </div>
                
                <div class="feature">
                    <i class="fas fa-chart-pie"></i>
                    <div class="feature-content">
                        <h3>Visual Analytics</h3>
                        <p>Interactive charts and visualizations to help you understand the time value of money.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="disclaimer">
            <p><strong>Disclaimer:</strong> This calculator is designed for informational and educational purposes only. The results should not be construed as financial advice. While we strive for accuracy, we make no guarantees regarding the results. Always consult with a qualified financial advisor before making any financial decisions.</p>
        </div>
        
        <footer>
            <div class="footer-links">
                <a href="#"><i class="fas fa-lock"></i> Privacy Policy</a>
                <a href="#"><i class="fas fa-file-alt"></i> Terms of Service</a>
                <a href="#"><i class="fas fa-question-circle"></i> Help Center</a>
                <a href="#"><i class="fas fa-envelope"></i> Contact Us</a>
            </div>
            <p>© 2023 FinTech Pro Present Value Calculator. All rights reserved.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const futureValueInput = document.getElementById('future-value');
            const futureValueSlider = document.getElementById('future-value-slider');
            const futureValueDisplay = document.getElementById('future-value-display');
            
            const interestRateInput = document.getElementById('interest-rate');
            const interestRateSlider = document.getElementById('interest-rate-slider');
            const interestRateDisplay = document.getElementById('interest-rate-display');
            
            const timePeriodInput = document.getElementById('time-period');
            const timePeriodSlider = document.getElementById('time-period-slider');
            const timePeriodDisplay = document.getElementById('time-period-display');
            
            const inflationRateInput = document.getElementById('inflation-rate');
            const inflationRateSlider = document.getElementById('inflation-rate-slider');
            const inflationRateDisplay = document.getElementById('inflation-rate-display');
            
            const compoundingSelect = document.getElementById('compounding');
            const inflationCheckbox = document.getElementById('inflation-adjust');
            const calculateBtn = document.getElementById('calculate-btn');
            const presentValueEl = document.getElementById('present-value');
            const discountFactorEl = document.getElementById('discount-factor');
            const errorMessage = document.getElementById('error-message');
            
            // Calculation details elements
            const effectiveRateEl = document.getElementById('effective-rate');
            const compoundingPeriodsEl = document.getElementById('compounding-periods');
            const realRateEl = document.getElementById('real-rate');
            const inflationStatusEl = document.getElementById('inflation-status');
            
            // Initialize sliders and displays
            futureValueSlider.value = futureValueInput.value;
            futureValueDisplay.textContent = formatCurrency(futureValueInput.value);
            
            interestRateSlider.value = interestRateInput.value;
            interestRateDisplay.textContent = interestRateInput.value + '%';
            
            timePeriodSlider.value = timePeriodInput.value;
            timePeriodDisplay.textContent = timePeriodInput.value + ' years';
            
            inflationRateSlider.value = inflationRateInput.value;
            inflationRateDisplay.textContent = inflationRateInput.value + '%';
            
            // Set up event listeners for inputs and sliders
            futureValueInput.addEventListener('input', function() {
                futureValueSlider.value = this.value;
                futureValueDisplay.textContent = formatCurrency(this.value);
                calculatePresentValue();
            });
            
            futureValueSlider.addEventListener('input', function() {
                futureValueInput.value = this.value;
                futureValueDisplay.textContent = formatCurrency(this.value);
                calculatePresentValue();
            });
            
            interestRateInput.addEventListener('input', function() {
                interestRateSlider.value = this.value;
                interestRateDisplay.textContent = this.value + '%';
                calculatePresentValue();
            });
            
            interestRateSlider.addEventListener('input', function() {
                interestRateInput.value = this.value;
                interestRateDisplay.textContent = this.value + '%';
                calculatePresentValue();
            });
            
            timePeriodInput.addEventListener('input', function() {
                timePeriodSlider.value = this.value;
                timePeriodDisplay.textContent = this.value + ' years';
                calculatePresentValue();
            });
            
            timePeriodSlider.addEventListener('input', function() {
                timePeriodInput.value = this.value;
                timePeriodDisplay.textContent = this.value + ' years';
                calculatePresentValue();
            });
            
            inflationRateInput.addEventListener('input', function() {
                inflationRateSlider.value = this.value;
                inflationRateDisplay.textContent = this.value + '%';
                calculatePresentValue();
            });
            
            inflationRateSlider.addEventListener('input', function() {
                inflationRateInput.value = this.value;
                inflationRateDisplay.textContent = this.value + '%';
                calculatePresentValue();
            });
            
            compoundingSelect.addEventListener('change', calculatePresentValue);
            inflationCheckbox.addEventListener('change', calculatePresentValue);
            calculateBtn.addEventListener('click', calculatePresentValue);
            
            // Chart variable
            let pvChart = null;
            
            // Initial calculation
            calculatePresentValue();
            
            // Calculate present value function
            function calculatePresentValue() {
                // Reset error message
                errorMessage.style.display = 'none';
                
                // Get input values
                const futureValue = parseFloat(futureValueInput.value);
                const interestRate = parseFloat(interestRateInput.value) / 100;
                const timePeriod = parseFloat(timePeriodInput.value);
                const compounding = parseInt(compoundingSelect.value);
                const adjustForInflation = inflationCheckbox.checked;
                const inflationRate = adjustForInflation ? parseFloat(inflationRateInput.value) / 100 : 0;
                
                // Validate inputs
                if (isNaN(futureValue) || isNaN(interestRate) || isNaN(timePeriod) || 
                   (adjustForInflation && isNaN(inflationRate))) {
                    errorMessage.style.display = 'block';
                    return;
                }
                
                if (futureValue <= 0 || timePeriod <= 0) {
                    errorMessage.style.display = 'block';
                    return;
                }
                
                // Calculate effective interest rate
                let effectiveRate = interestRate;
                let realRate = interestRate;
                
                if (adjustForInflation) {
                    // Calculate real interest rate (Fisher equation)
                    realRate = ((1 + interestRate) / (1 + inflationRate)) - 1;
                    effectiveRate = realRate;
                }
                
                // Calculate effective annual rate
                const effectiveAnnualRate = Math.pow(1 + effectiveRate/compounding, compounding) - 1;
                
                // Calculate present value
                const n = compounding;
                const t = timePeriod;
                const totalPeriods = n * t;
                
                // PV = FV / (1 + r/n)^(n*t)
                const presentValue = futureValue / Math.pow(1 + effectiveRate/n, totalPeriods);
                
                // Calculate discount factor
                const discountFactor = presentValue / futureValue;
                
                // Format and display result
                presentValueEl.textContent = formatCurrency(presentValue);
                discountFactorEl.textContent = discountFactor.toFixed(4);
                
                // Update calculation details
                effectiveRateEl.textContent = (effectiveAnnualRate * 100).toFixed(2) + '%';
                compoundingPeriodsEl.textContent = totalPeriods;
                realRateEl.textContent = (realRate * 100).toFixed(2) + '%';
                inflationStatusEl.textContent = adjustForInflation ? 'Yes' : 'No';
                
                // Update chart
                updateChart(futureValue, presentValue, timePeriod, effectiveRate, n);
            }
            
            // Update chart with new data
            function updateChart(futureValue, presentValue, years, rate, compounding) {
                const dataPoints = [];
                const labels = [];
                
                for (let i = 0; i <= years; i++) {
                    labels.push(`Year ${i}`);
                    // Value at each year = PV * (1 + r/n)^(n*i)
                    const value = presentValue * Math.pow(1 + rate/compounding, compounding * i);
                    dataPoints.push(value);
                }
                
                const ctx = document.getElementById('pv-chart').getContext('2d');
                
                // Destroy existing chart if it exists
                if (pvChart) {
                    pvChart.destroy();
                }
                
                // Create new chart
                pvChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Value Growth',
                            data: dataPoints,
                            borderColor: '#6366f1',
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            borderWidth: 3,
                            pointRadius: 5,
                            pointBackgroundColor: '#fff',
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `Value: ${formatCurrency(context.raw)}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.05)'
                                },
                                ticks: {
                                    color: '#94a3b8',
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.05)'
                                },
                                ticks: {
                                    color: '#94a3b8'
                                }
                            }
                        }
                    }
                });
            }
            
            // Format currency
            function formatCurrency(value) {
                return '$' + value.toLocaleString(undefined, {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                });
            }
            
            // Set up event listeners for export buttons
            document.getElementById('print-btn').addEventListener('click', function() {
                window.print();
            });
            
            document.getElementById('pdf-btn').addEventListener('click', function() {
                alert('PDF export would be implemented with jsPDF library');
            });
            
            document.getElementById('excel-btn').addEventListener('click', function() {
                alert('Excel export would be implemented with SheetJS library');
            });
            
            document.getElementById('share-btn').addEventListener('click', function() {
                const shareText = `Present Value Calculation Result: ${presentValueEl.textContent}`;
                if (navigator.share) {
                    navigator.share({
                        title: 'Present Value Calculation',
                        text: shareText,
                    })
                    .catch(console.error);
                } else {
                    alert('Share functionality: ' + shareText);
                }
            });
        });
    </script>
</body>
</html>