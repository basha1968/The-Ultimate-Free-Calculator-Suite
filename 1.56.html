<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RentCostPro | Advanced Rental Cost Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #4895ef;
            --accent: #7209b7;
            --success: #4cc9f0;
            --warning: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --text: #343a40;
            --text-light: #6c757d;
            --card-bg: #ffffff;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --border: 1px solid #e9ecef;
            --transition: all 0.3s ease;
        }

        .dark-mode {
            --light: #121212;
            --dark: #f8f9fa;
            --text: #e9ecef;
            --text-light: #adb5bd;
            --card-bg: #1e1e1e;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            --border: 1px solid #343a40;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            color: var(--text);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
            transition: var(--transition);
        }

        body.dark-mode {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--card-shadow);
        }

        .logo-icon i {
            font-size: 24px;
            color: white;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .theme-toggle {
            background: var(--card-bg);
            border: var(--border);
            width: 50px;
            height: 26px;
            border-radius: 50px;
            position: relative;
            cursor: pointer;
            display: flex;
            align-items: center;
            padding: 0 3px;
            transition: var(--transition);
        }

        .theme-toggle i {
            position: absolute;
            font-size: 14px;
            transition: var(--transition);
        }

        .fa-sun {
            left: 5px;
            color: #ffd43b;
        }

        .fa-moon {
            right: 5px;
            color: #94a3b8;
        }

        .toggle-ball {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            transition: transform 0.3s ease;
        }

        .dark-mode .toggle-ball {
            transform: translateX(24px);
        }

        .security-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            padding: 8px 15px;
            border-radius: 30px;
            font-weight: 500;
            font-size: 14px;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        @media (max-width: 900px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            border: var(--border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: var(--border);
        }

        .card-header i {
            font-size: 24px;
            margin-right: 15px;
            color: var(--primary);
        }

        .card-title {
            font-size: 22px;
            font-weight: 600;
            color: var(--primary);
        }

        .input-group {
            margin-bottom: 20px;
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 16px;
            color: var(--text);
            display: flex;
            align-items: center;
        }

        label i {
            margin-right: 8px;
            color: var(--primary);
        }

        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 8px;
        }

        .tooltip i {
            color: var(--accent);
            font-size: 16px;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 250px;
            background: var(--dark);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            font-weight: normal;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        input, select {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            border: var(--border);
            background: var(--light);
            color: var(--text);
            font-size: 16px;
            transition: var(--transition);
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
        }

        .range-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 8px;
        }

        input[type="range"] {
            flex: 1;
            padding: 0;
            height: 8px;
            -webkit-appearance: none;
            background: var(--light);
            border-radius: 10px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 0 8px rgba(67, 97, 238, 0.5);
        }

        .range-value {
            display: inline-block;
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            min-width: 80px;
            text-align: center;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-group input {
            width: auto;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 14px 25px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            text-decoration: none;
            gap: 10px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(67, 97, 238, 0.3);
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: rgba(67, 97, 238, 0.05);
        }

        .result-container {
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.03), rgba(114, 9, 183, 0.03));
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            border: var(--border);
        }

        .result-card {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            background: var(--card-bg);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .result-label {
            font-size: 14px;
            color: var(--text);
            margin-bottom: 8px;
        }

        .result-value {
            font-size: 22px;
            font-weight: 700;
            color: var(--primary);
        }

        .result-highlight {
            color: var(--accent);
        }

        .chart-container {
            height: 300px;
            margin-top: 25px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 14px;
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }

        .comparison-table th {
            background: var(--primary);
            color: white;
            padding: 12px 15px;
            text-align: left;
        }

        .comparison-table td {
            padding: 10px 15px;
            border-bottom: var(--border);
        }

        .comparison-table tr:nth-child(even) {
            background: rgba(67, 97, 238, 0.03);
        }

        .comparison-table tr:hover {
            background: rgba(67, 97, 238, 0.08);
        }

        .export-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .ad-container {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin: 25px 0;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: var(--card-shadow);
            border: var(--border);
        }

        .ad-label {
            display: inline-block;
            background: rgba(114, 9, 183, 0.1);
            color: var(--accent);
            padding: 6px 15px;
            border-radius: 20px;
            margin-bottom: 15px;
            font-size: 14px;
            font-weight: 500;
        }

        .ad-content {
            width: 100%;
            height: 100px;
            background: rgba(114, 9, 183, 0.05);
            border: 2px dashed var(--accent);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--accent);
            font-weight: 500;
            font-size: 16px;
        }

        .sharing-section {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .share-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--card-bg);
            color: var(--primary);
            border: var(--border);
            font-size: 20px;
            cursor: pointer;
            transition: var(--transition);
        }

        .share-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
        }

        .compliance-section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            box-shadow: var(--card-shadow);
            border: var(--border);
        }

        .compliance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .compliance-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .compliance-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: rgba(67, 97, 238, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--primary);
        }

        .compliance-content h3 {
            font-size: 18px;
            margin-bottom: 5px;
            color: var(--primary);
        }

        .compliance-content p {
            color: var(--text);
            font-size: 14px;
            line-height: 1.6;
        }

        footer {
            text-align: center;
            padding: 30px 0 20px;
            margin-top: 20px;
            border-top: var(--border);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text);
            text-decoration: none;
            transition: var(--transition);
            font-size: 14px;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .disclaimer {
            background: rgba(247, 37, 133, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            font-size: 14px;
            color: var(--text);
            border-left: 4px solid var(--warning);
        }

        @media (max-width: 768px) {
            .calculator-grid {
                gap: 15px;
            }
            
            .card {
                padding: 20px;
            }
            
            header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .logo {
                justify-content: center;
            }
            
            .header-controls {
                justify-content: center;
            }
        }
        
        .error-message {
            color: var(--warning);
            background: rgba(247, 37, 133, 0.05);
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
            font-size: 14px;
            border-left: 3px solid var(--warning);
        }
        
        .cookie-consent {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 15px;
            border: var(--border);
        }
        
        .cookie-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-home"></i>
                </div>
                <div class="logo-text">RentCostPro</div>
            </div>
            <div class="header-controls">
                <div class="security-badge">
                    <i class="fas fa-lock"></i>
                    <span>Secure & GDPR Compliant</span>
                </div>
                <div class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-sun"></i>
                    <i class="fas fa-moon"></i>
                    <div class="toggle-ball"></div>
                </div>
            </div>
        </header>
        
        <div class="ad-container">
            <span class="ad-label">Adsterra Ad Space</span>
            <div class="ad-content">
                <!-- Adsterra ad code will be placed here -->
                <p>Adsterra Responsive Banner (728x90)</p>
            </div>
        </div>
        
        <div class="calculator-grid">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-sliders-h"></i>
                    <h2 class="card-title">Rental Details</h2>
                </div>
                
                <div class="input-group">
                    <label for="monthly-rent">
                        <i class="fas fa-dollar-sign"></i> Monthly Rent ($)
                        <span class="tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Base monthly rent amount</span>
                        </span>
                    </label>
                    <div class="input-with-info">
                        <input type="number" id="monthly-rent" placeholder="Enter monthly rent" value="1500">
                        <div class="range-container">
                            <input type="range" id="rent-slider" min="500" max="5000" step="100" value="1500">
                            <span class="range-value" id="rent-display">$1,500</span>
                        </div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="lease-duration">
                        <i class="fas fa-calendar-alt"></i> Lease Duration
                        <span class="tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Total length of your lease agreement</span>
                        </span>
                    </label>
                    <div style="display: flex; gap: 15px;">
                        <input type="number" id="lease-value" value="12" min="1" style="flex: 1;">
                        <select id="lease-unit" style="flex: 1;">
                            <option value="months">Months</option>
                            <option value="years">Years</option>
                        </select>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="utilities">
                        <i class="fas fa-bolt"></i> Utilities ($)
                        <span class="tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Monthly utility costs (electricity, water, gas)</span>
                        </span>
                    </label>
                    <input type="number" id="utilities" placeholder="Enter utility costs" value="200">
                </div>
                
                <div class="input-group">
                    <label for="maintenance">
                        <i class="fas fa-tools"></i> Maintenance ($)
                        <span class="tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Estimated monthly maintenance costs</span>
                        </span>
                    </label>
                    <input type="number" id="maintenance" placeholder="Enter maintenance costs" value="50">
                </div>
                
                <div class="input-group">
                    <label for="insurance">
                        <i class="fas fa-shield-alt"></i> Insurance ($)
                        <span class="tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Monthly rental insurance cost</span>
                        </span>
                    </label>
                    <input type="number" id="insurance" placeholder="Enter insurance cost" value="30">
                </div>
                
                <div class="input-group">
                    <label for="location">
                        <i class="fas fa-map-marker-alt"></i> Location (City)
                        <span class="tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">For regional cost comparisons</span>
                        </span>
                    </label>
                    <select id="location">
                        <option value="">Select a city</option>
                        <option value="new-york">New York</option>
                        <option value="los-angeles">Los Angeles</option>
                        <option value="chicago">Chicago</option>
                        <option value="houston">Houston</option>
                        <option value="miami">Miami</option>
                        <option value="seattle">Seattle</option>
                    </select>
                </div>
                
                <div class="error-message" id="error-message">
                    <i class="fas fa-exclamation-circle"></i> Please enter valid values for all required fields
                </div>
                
                <button class="btn btn-block" id="calculate-btn">
                    <i class="fas fa-calculator"></i> Calculate Rental Costs
                </button>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-chart-pie"></i>
                    <h2 class="card-title">Cost Analysis</h2>
                </div>
                
                <div class="result-container">
                    <div class="result-card">
                        <div class="result-label">Monthly Total</div>
                        <div class="result-value" id="monthly-total">$1,780</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-label">Total Lease Cost</div>
                        <div class="result-value result-highlight" id="total-cost">$21,360</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-label">Avg. Monthly Cost</div>
                        <div class="result-value" id="avg-monthly">$1,780</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-label">Annual Cost</div>
                        <div class="result-value" id="annual-cost">$21,360</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="cost-chart"></canvas>
                </div>
                
                <div class="export-section">
                    <button class="btn" id="print-btn">
                        <i class="fas fa-print"></i> Print Summary
                    </button>
                    <button class="btn" id="pdf-btn">
                        <i class="fas fa-file-pdf"></i> Save as PDF
                    </button>
                    <button class="btn" id="excel-btn">
                        <i class="fas fa-file-excel"></i> Export to Excel
                    </button>
                </div>
                
                <div class="sharing-section">
                    <div class="share-btn" id="email-share">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div class="share-btn" id="whatsapp-share">
                        <i class="fab fa-whatsapp"></i>
                    </div>
                    <div class="share-btn" id="linkedin-share">
                        <i class="fab fa-linkedin-in"></i>
                    </div>
                    <div class="share-btn" id="copy-link">
                        <i class="fas fa-link"></i>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <i class="fas fa-city"></i>
                <h2 class="card-title">Regional Cost Comparison</h2>
            </div>
            
            <div class="chart-container" style="height: 250px; margin-bottom: 20px;">
                <canvas id="comparison-chart"></canvas>
            </div>
            
            <div style="overflow-x: auto;">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>City</th>
                            <th>Avg. Rent</th>
                            <th>Utilities</th>
                            <th>Total Monthly</th>
                            <th>Compared to Your Cost</th>
                        </tr>
                    </thead>
                    <tbody id="comparison-body">
                        <!-- Comparison rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="ad-container">
            <span class="ad-label">Yllix Ad Space</span>
            <div class="ad-content">
                <!-- Yllix ad code will be placed here -->
                <p>Yllix Responsive Ad (728x90)</p>
            </div>
        </div>
        
        <div class="compliance-section">
            <div class="card-header">
                <i class="fas fa-shield-alt"></i>
                <h2 class="card-title">Security & Compliance</h2>
            </div>
            
            <div class="compliance-grid">
                <div class="compliance-item">
                    <div class="compliance-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <div class="compliance-content">
                        <h3>Client-Side Processing</h3>
                        <p>All calculations happen in your browser - no data is stored or transmitted</p>
                    </div>
                </div>
                
                <div class="compliance-item">
                    <div class="compliance-icon">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="compliance-content">
                        <h3>GDPR/CCPA Compliant</h3>
                        <p>Fully compliant with global privacy regulations</p>
                    </div>
                </div>
                
                <div class="compliance-item">
                    <div class="compliance-icon">
                        <i class="fas fa-ban"></i>
                    </div>
                    <div class="compliance-content">
                        <h3>No Data Tracking</h3>
                        <p>We don't track or store any personal or financial information</p>
                    </div>
                </div>
                
                <div class="compliance-item">
                    <div class="compliance-icon">
                        <i class="fas fa-ad"></i>
                    </div>
                    <div class="compliance-content">
                        <h3>Secure Ad Integration</h3>
                        <p>Ad networks are sandboxed to prevent security risks</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="disclaimer">
            <p><strong>Disclaimer:</strong> This calculator provides estimates only. Actual rental costs may vary based on your specific situation. The regional comparison data is based on market averages and may not reflect current market conditions. Always review your lease agreement carefully.</p>
        </div>
        
        <footer>
            <div class="footer-links">
                <a href="#"><i class="fas fa-lock"></i> Privacy Policy</a>
                <a href="#"><i class="fas fa-file-contract"></i> Terms of Service</a>
                <a href="#"><i class="fas fa-question-circle"></i> Help Center</a>
                <a href="#"><i class="fas fa-envelope"></i> Contact Support</a>
            </div>
            <p>Â© 2023 RentCostPro. All rights reserved. Professional Rental Analysis Tools.</p>
        </footer>
    </div>

    <div class="cookie-consent" id="cookie-consent">
        <p><strong>Cookie Consent:</strong> We use cookies to ensure you get the best experience on our website. Our calculator operates entirely client-side and doesn't require tracking cookies, but ad partners may use cookies for personalized advertising.</p>
        <div class="cookie-buttons">
            <button class="btn" id="accept-cookies">Accept All</button>
            <button class="btn btn-outline" id="reject-cookies">Reject Non-Essential</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Theme toggle functionality
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
            });
            
            // Set up range slider for rent
            const rentInput = document.getElementById('monthly-rent');
            const rentSlider = document.getElementById('rent-slider');
            const rentDisplay = document.getElementById('rent-display');
            
            // Format currency
            function formatCurrency(value) {
                return '$' + value.toLocaleString(undefined, {
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 0
                });
            }
            
            // Initialize rent slider
            rentSlider.value = rentInput.value;
            rentDisplay.textContent = formatCurrency(rentInput.value);
            
            // Update rent input from slider
            rentSlider.addEventListener('input', function() {
                rentInput.value = this.value;
                rentDisplay.textContent = formatCurrency(this.value);
                calculateRent();
            });
            
            // Update slider from input
            rentInput.addEventListener('input', function() {
                rentSlider.value = this.value;
                rentDisplay.textContent = formatCurrency(this.value);
                calculateRent();
            });
            
            // Initialize charts
            const costCtx = document.getElementById('cost-chart').getContext('2d');
            const costChart = new Chart(costCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Base Rent', 'Utilities', 'Maintenance', 'Insurance'],
                    datasets: [{
                        data: [1500, 200, 50, 30],
                        backgroundColor: [
                            '#4361ee',
                            '#4895ef',
                            '#7209b7',
                            '#f72585'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                boxWidth: 15,
                                padding: 20,
                                font: {
                                    size: 13
                                }
                            }
                        }
                    }
                }
            });
            
            // Comparison chart
            const comparisonCtx = document.getElementById('comparison-chart').getContext('2d');
            const comparisonChart = new Chart(comparisonCtx, {
                type: 'bar',
                data: {
                    labels: ['New York', 'Los Angeles', 'Chicago', 'Houston', 'Miami', 'Seattle'],
                    datasets: [{
                        label: 'Average Rent',
                        data: [3500, 2800, 1900, 1600, 2300, 2200],
                        backgroundColor: '#4361ee'
                    }, {
                        label: 'Your Location',
                        data: [null, null, null, null, null, 1780],
                        backgroundColor: '#f72585'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
            
            // City data for comparison
            const cityData = {
                "new-york": { name: "New York", rent: 3500, utilities: 300, maintenance: 100 },
                "los-angeles": { name: "Los Angeles", rent: 2800, utilities: 250, maintenance: 90 },
                "chicago": { name: "Chicago", rent: 1900, utilities: 180, maintenance: 70 },
                "houston": { name: "Houston", rent: 1600, utilities: 200, maintenance: 60 },
                "miami": { name: "Miami", rent: 2300, utilities: 220, maintenance: 80 },
                "seattle": { name: "Seattle", rent: 2200, utilities: 190, maintenance: 85 }
            };
            
            // Main calculation function
            function calculateRent() {
                // Get input values
                const monthlyRent = parseFloat(rentInput.value) || 0;
                const leaseValue = parseInt(document.getElementById('lease-value').value) || 0;
                const leaseUnit = document.getElementById('lease-unit').value;
                const utilities = parseFloat(document.getElementById('utilities').value) || 0;
                const maintenance = parseFloat(document.getElementById('maintenance').value) || 0;
                const insurance = parseFloat(document.getElementById('insurance').value) || 0;
                const location = document.getElementById('location').value;
                
                // Validate inputs
                const errorMessage = document.getElementById('error-message');
                if (!monthlyRent || !leaseValue) {
                    errorMessage.style.display = 'block';
                    return;
                }
                errorMessage.style.display = 'none';
                
                // Calculate lease duration in months
                const leaseMonths = leaseUnit === 'years' ? leaseValue * 12 : leaseValue;
                
                // Calculate costs
                const monthlyTotal = monthlyRent + utilities + maintenance + insurance;
                const totalCost = monthlyTotal * leaseMonths;
                const annualCost = monthlyTotal * 12;
                
                // Update results
                document.getElementById('monthly-total').textContent = formatCurrency(monthlyTotal);
                document.getElementById('total-cost').textContent = formatCurrency(totalCost);
                document.getElementById('avg-monthly').textContent = formatCurrency(monthlyTotal);
                document.getElementById('annual-cost').textContent = formatCurrency(annualCost);
                
                // Update chart
                costChart.data.datasets[0].data = [monthlyRent, utilities, maintenance, insurance];
                costChart.update();
                
                // Update comparison table
                updateComparisonTable(monthlyTotal, location);
            }
            
            // Update comparison table
            function updateComparisonTable(userMonthly, location) {
                const tableBody = document.getElementById('comparison-body');
                tableBody.innerHTML = '';
                
                // Add rows for each city
                for (const [key, city] of Object.entries(cityData)) {
                    const totalMonthly = city.rent + city.utilities + city.maintenance;
                    const difference = totalMonthly - userMonthly;
                    let comparison = '';
                    
                    if (difference > 0) {
                        comparison = `<span style="color: #f72585">${formatCurrency(difference)} higher</span>`;
                    } else if (difference < 0) {
                        comparison = `<span style="color: #4cc9f0">${formatCurrency(Math.abs(difference))} lower</span>`;
                    } else {
                        comparison = 'Same';
                    }
                    
                    // Highlight user's location
                    const isUserLocation = location === key;
                    const rowClass = isUserLocation ? 'style="background-color: rgba(67, 97, 238, 0.1);"' : '';
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td ${isUserLocation ? 'class="result-highlight"' : ''}>${city.name} ${isUserLocation ? '(Your Location)' : ''}</td>
                        <td>${formatCurrency(city.rent)}</td>
                        <td>${formatCurrency(city.utilities)}</td>
                        <td>${formatCurrency(totalMonthly)}</td>
                        <td>${comparison}</td>
                    `;
                    tableBody.appendChild(row);
                }
            }
            
            // Set up event listeners
            document.getElementById('calculate-btn').addEventListener('click', calculateRent);
            
            // Add event listeners to all inputs for real-time calculation
            const inputs = [
                'lease-value', 'lease-unit', 'utilities', 
                'maintenance', 'insurance', 'location'
            ];
            
            inputs.forEach(id => {
                document.getElementById(id).addEventListener('change', calculateRent);
            });
            
            // Initial calculation
            calculateRent();
            
            // Export functionality
            document.getElementById('print-btn').addEventListener('click', function() {
                window.print();
            });
            
            document.getElementById('pdf-btn').addEventListener('click', function() {
                alert('PDF export would generate a professional rental cost report');
            });
            
            document.getElementById('excel-btn').addEventListener('click', function() {
                alert('Excel export would generate a spreadsheet with your rental analysis');
            });
            
            // Sharing functionality
            document.getElementById('email-share').addEventListener('click', function() {
                const subject = 'My Rental Cost Analysis';
                const body = `Check out my rental cost analysis: ${document.getElementById('total-cost').textContent} total lease cost!`;
                window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            });
            
            document.getElementById('whatsapp-share').addEventListener('click', function() {
                const text = `Check out my rental cost analysis: ${document.getElementById('total-cost').textContent} total lease cost!`;
                window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
            });
            
            // Cookie consent
            const cookieConsent = document.getElementById('cookie-consent');
            const acceptCookies = document.getElementById('accept-cookies');
            const rejectCookies = document.getElementById('reject-cookies');
            
            // Check if consent already given
            if (!localStorage.getItem('cookieConsent')) {
                cookieConsent.style.display = 'flex';
            }
            
            acceptCookies.addEventListener('click', function() {
                localStorage.setItem('cookieConsent', 'accepted');
                cookieConsent.style.display = 'none';
            });
            
            rejectCookies.addEventListener('click', function() {
                localStorage.setItem('cookieConsent', 'rejected');
                cookieConsent.style.display = 'none';
            });
        });
    </script>
</body>
</html>