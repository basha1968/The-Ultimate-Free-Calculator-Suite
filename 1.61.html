<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RMD Pro | Required Minimum Distribution Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #10b981;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #94a3b8;
            --border: #e2e8f0;
            --shadow: rgba(0, 0, 0, 0.1);
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --card-bg: #ffffff;
            --tooltip: #1e293b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 20px 0 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .logo i {
            font-size: 32px;
            color: var(--primary);
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
            letter-spacing: -0.5px;
        }

        .subtitle {
            color: var(--gray);
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        .card {
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 25px var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            color: var(--primary);
        }

        .grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        @media (max-width: 900px) {
            .grid-container {
                grid-template-columns: 1fr;
            }
        }

        .input-group {
            margin-bottom: 20px;
            position: relative;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-tooltip {
            position: relative;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .info-tooltip .tooltip-text {
            visibility: hidden;
            width: 250px;
            background-color: var(--tooltip);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            font-weight: normal;
        }

        .info-tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .input-container {
            position: relative;
        }

        .input-container i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        input, select {
            width: 100%;
            padding: 14px 20px 14px 45px;
            border: 1px solid var(--border);
            border-radius: 12px;
            font-size: 16px;
            background: var(--light);
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 14px 25px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            flex: 1;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: #f1f5f9;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .result-card {
            background: var(--light);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .result-card:hover {
            transform: scale(1.03);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .result-card h3 {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--dark);
        }

        .result-value {
            font-size: 32px;
            font-weight: 800;
            margin: 10px 0;
        }

        .positive {
            color: var(--success);
        }

        .warning {
            color: var(--warning);
        }

        .chart-container {
            height: 300px;
            margin-top: 25px;
        }

        .export-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        .export-options {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .ad-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin: 25px 0;
            border: 1px dashed var(--border);
            color: var(--gray);
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .ad-label {
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 1px;
            margin-bottom: 10px;
            color: var(--gray);
        }

        footer {
            text-align: center;
            padding: 30px 0;
            color: var(--gray);
            font-size: 14px;
            border-top: 1px solid var(--border);
            margin-top: 20px;
        }

        .disclaimer {
            background: rgba(239, 68, 68, 0.1);
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 14px;
            color: var(--dark);
            border-left: 4px solid var(--danger);
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 25px;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .performance-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 8px;
        }

        .badge-good {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
        }

        .badge-fair {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
        }

        .badge-poor {
            background: rgba(239, 68, 68, 0.15);
            color: var(--danger);
        }

        .social-sharing {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .facebook {
            background: #3b5998;
        }

        .twitter {
            background: #1da1f2;
        }

        .linkedin {
            background: #0077b5;
        }

        .email {
            background: #ea4335;
        }

        .social-btn:hover {
            transform: translateY(-3px);
        }

        .table-container {
            width: 100%;
            overflow-x: auto;
            margin-top: 20px;
        }

        .rmd-table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px var(--shadow);
        }

        .rmd-table th {
            background: var(--primary);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .rmd-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border);
        }

        .rmd-table tr:nth-child(even) {
            background-color: var(--light);
        }

        .rmd-table tr:hover {
            background-color: rgba(37, 99, 235, 0.05);
        }

        @media (max-width: 600px) {
            .btn-group {
                flex-direction: column;
            }
            
            .export-options {
                flex-direction: column;
            }
            
            .tab {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .social-sharing {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-calculator"></i>
                <h1>RMD Pro Calculator</h1>
            </div>
            <p class="subtitle">Calculate your Required Minimum Distributions based on current IRS regulations</p>
        </header>

        <!-- Top Ad Slot -->
        <div class="ad-container">
            <div class="ad-label">Advertisement</div>
            <div class="ad-content">
                <!-- Adsterra Ad Code -->
                <div style="width: 100%; height: 100px; background: #f0f5ff; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                    <span style="color: #2563eb; font-weight: 600;">Adsterra Ad Slot (728x90)</span>
                </div>
            </div>
        </div>

        <div class="grid-container">
            <div class="card">
                <h2 class="card-title"><i class="fas fa-user"></i> Personal Information</h2>
                
                <div class="input-group">
                    <label for="birthDate">
                        Date of Birth
                        <span class="info-tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Your date of birth to calculate your current age</span>
                        </span>
                    </label>
                    <div class="input-container">
                        <i class="fas fa-birthday-cake"></i>
                        <input type="date" id="birthDate" value="1955-01-15">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="accountBalance">
                        Account Balance (Dec 31)
                        <span class="info-tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Your retirement account balance as of December 31 of the previous year</span>
                        </span>
                    </label>
                    <div class="input-container">
                        <i class="fas fa-dollar-sign"></i>
                        <input type="number" id="accountBalance" value="350000" min="0">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="beneficiaryType">
                        Beneficiary Type
                        <span class="info-tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Relationship of your primary beneficiary</span>
                        </span>
                    </label>
                    <div class="input-container">
                        <i class="fas fa-users"></i>
                        <select id="beneficiaryType">
                            <option value="spouse">Spouse (less than 10 years younger)</option>
                            <option value="spouse_young">Spouse (10+ years younger)</option>
                            <option value="nonspouse">Non-Spouse</option>
                            <option value="none">No Beneficiary</option>
                        </select>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="lifeExpectancy">
                        Life Expectancy Table
                        <span class="info-tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">IRS-approved life expectancy table for calculation</span>
                        </span>
                    </label>
                    <div class="input-container">
                        <i class="fas fa-table"></i>
                        <select id="lifeExpectancy">
                            <option value="uniform">Uniform Lifetime (Default)</option>
                            <option value="joint">Joint and Last Survivor</option>
                            <option value="single">Single Life Expectancy</option>
                        </select>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="spouseAge">
                        Spouse's Age (if applicable)
                        <span class="info-tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Required for Joint and Last Survivor table</span>
                        </span>
                    </label>
                    <div class="input-container">
                        <i class="fas fa-user-friends"></i>
                        <input type="number" id="spouseAge" placeholder="Enter spouse's age" min="0" max="120">
                    </div>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" id="calculateBtn">
                        <i class="fas fa-calculator"></i> Calculate RMD
                    </button>
                    <button class="btn btn-secondary" id="resetBtn">
                        <i class="fas fa-redo"></i> Reset Values
                    </button>
                </div>
            </div>
            
            <div class="card">
                <h2 class="card-title"><i class="fas fa-chart-bar"></i> RMD Results</h2>
                
                <div class="tabs">
                    <div class="tab active" data-tab="summary">Summary</div>
                    <div class="tab" data-tab="table">Life Expectancy Table</div>
                    <div class="tab" data-tab="projection">Projection</div>
                </div>
                
                <div class="tab-content active" id="summaryTab">
                    <div class="results-grid">
                        <div class="result-card">
                            <h3>Your Current Age</h3>
                            <div class="result-value">69</div>
                            <p>As of Dec 31 this year</p>
                        </div>
                        
                        <div class="result-card">
                            <h3>RMD Amount</h3>
                            <div class="result-value">$14,286</div>
                            <p>Minimum distribution for this year</p>
                        </div>
                        
                        <div class="result-card">
                            <h3>Distribution Period</h3>
                            <div class="result-value">24.5</div>
                            <p>Life expectancy factor</p>
                        </div>
                        
                        <div class="result-card">
                            <h3>RMD Deadline</h3>
                            <div class="result-value">Apr 1, 2025</div>
                            <p>For first-year RMDs</p>
                        </div>
                    </div>
                    
                    <div class="result-card" style="margin-top: 20px; text-align: left;">
                        <h3>RMD Calculation Details</h3>
                        <p style="margin-top: 15px;"><strong>Formula:</strong> Account Balance / Life Expectancy Factor</p>
                        <p style="margin-top: 10px;"><strong>Calculation:</strong> $350,000 / 24.5 = $14,286</p>
                        <p style="margin-top: 10px;"><strong>Table Used:</strong> Uniform Lifetime Table</p>
                        <p style="margin-top: 10px;"><strong>Important Note:</strong> Your first RMD must be taken by April 1 of the year after you turn 73.</p>
                    </div>
                </div>
                
                <div class="tab-content" id="tableTab">
                    <h3 class="card-title"><i class="fas fa-table"></i> IRS Uniform Lifetime Table</h3>
                    <p style="margin-bottom: 15px;">This table is used by most retirement account owners to calculate RMDs.</p>
                    
                    <div class="table-container">
                        <table class="rmd-table">
                            <thead>
                                <tr>
                                    <th>Age</th>
                                    <th>Distribution Period</th>
                                    <th>Age</th>
                                    <th>Distribution Period</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>70</td>
                                    <td>27.4</td>
                                    <td>85</td>
                                    <td>14.8</td>
                                </tr>
                                <tr>
                                    <td>71</td>
                                    <td>26.5</td>
                                    <td>86</td>
                                    <td>14.1</td>
                                </tr>
                                <tr>
                                    <td>72</td>
                                    <td>25.6</td>
                                    <td>87</td>
                                    <td>13.4</td>
                                </tr>
                                <tr>
                                    <td>73</td>
                                    <td>24.7</td>
                                    <td>88</td>
                                    <td>12.7</td>
                                </tr>
                                <tr>
                                    <td>74</td>
                                    <td>23.8</td>
                                    <td>89</td>
                                    <td>12.0</td>
                                </tr>
                                <tr>
                                    <td>75</td>
                                    <td>22.9</td>
                                    <td>90</td>
                                    <td>11.4</td>
                                </tr>
                                <tr>
                                    <td>76</td>
                                    <td>22.0</td>
                                    <td>91</td>
                                    <td>10.8</td>
                                </tr>
                                <tr>
                                    <td>77</td>
                                    <td>21.2</td>
                                    <td>92</td>
                                    <td>10.2</td>
                                </tr>
                                <tr>
                                    <td>78</td>
                                    <td>20.3</td>
                                    <td>93</td>
                                    <td>9.6</td>
                                </tr>
                                <tr>
                                    <td>79</td>
                                    <td>19.5</td>
                                    <td>94</td>
                                    <td>9.1</td>
                                </tr>
                                <tr>
                                    <td>80</td>
                                    <td>18.7</td>
                                    <td>95</td>
                                    <td>8.6</td>
                                </tr>
                                <tr>
                                    <td>81</td>
                                    <td>17.9</td>
                                    <td>96</td>
                                    <td>8.1</td>
                                </tr>
                                <tr>
                                    <td>82</td>
                                    <td>17.1</td>
                                    <td>97</td>
                                    <td>7.6</td>
                                </tr>
                                <tr>
                                    <td>83</td>
                                    <td>16.3</td>
                                    <td>98</td>
                                    <td>7.1</td>
                                </tr>
                                <tr>
                                    <td>84</td>
                                    <td>15.5</td>
                                    <td>99+</td>
                                    <td>6.7</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="disclaimer" style="margin-top: 20px;">
                        <strong>Source:</strong> IRS Publication 590-B. The Uniform Lifetime Table is used by most retirement account owners to calculate RMDs.
                    </div>
                </div>
                
                <div class="tab-content" id="projectionTab">
                    <h3 class="card-title"><i class="fas fa-chart-line"></i> 10-Year RMD Projection</h3>
                    <p style="margin-bottom: 15px;">Projected RMD amounts based on your current account balance and 6% annual growth.</p>
                    
                    <div class="table-container">
                        <table class="rmd-table">
                            <thead>
                                <tr>
                                    <th>Year</th>
                                    <th>Age</th>
                                    <th>Account Balance</th>
                                    <th>Life Expectancy</th>
                                    <th>RMD Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2024</td>
                                    <td>69</td>
                                    <td>$350,000</td>
                                    <td>24.5</td>
                                    <td>$14,286</td>
                                </tr>
                                <tr>
                                    <td>2025</td>
                                    <td>70</td>
                                    <td>$356,286</td>
                                    <td>27.4</td>
                                    <td>$13,000</td>
                                </tr>
                                <tr>
                                    <td>2026</td>
                                    <td>71</td>
                                    <td>$363,546</td>
                                    <td>26.5</td>
                                    <td>$13,720</td>
                                </tr>
                                <tr>
                                    <td>2027</td>
                                    <td>72</td>
                                    <td>$371,211</td>
                                    <td>25.6</td>
                                    <td>$14,500</td>
                                </tr>
                                <tr>
                                    <td>2028</td>
                                    <td>73</td>
                                    <td>$379,307</td>
                                    <td>24.7</td>
                                    <td>$15,360</td>
                                </tr>
                                <tr>
                                    <td>2029</td>
                                    <td>74</td>
                                    <td>$387,862</td>
                                    <td>23.8</td>
                                    <td>$16,296</td>
                                </tr>
                                <tr>
                                    <td>2030</td>
                                    <td>75</td>
                                    <td>$396,904</td>
                                    <td>22.9</td>
                                    <td>$17,332</td>
                                </tr>
                                <tr>
                                    <td>2031</td>
                                    <td>76</td>
                                    <td>$406,464</td>
                                    <td>22.0</td>
                                    <td>$18,476</td>
                                </tr>
                                <tr>
                                    <td>2032</td>
                                    <td>77</td>
                                    <td>$416,573</td>
                                    <td>21.2</td>
                                    <td>$19,650</td>
                                </tr>
                                <tr>
                                    <td>2033</td>
                                    <td>78</td>
                                    <td>$427,266</td>
                                    <td>20.3</td>
                                    <td>$21,050</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="result-card" style="margin-top: 20px;">
                        <h3>Total Projected Distributions</h3>
                        <div class="result-value">$164,670</div>
                        <p>Over next 10 years</p>
                    </div>
                </div>
                
                <div class="export-section">
                    <h3 class="card-title"><i class="fas fa-download"></i> Export & Share</h3>
                    <div class="export-options">
                        <button class="btn btn-secondary" id="printBtn">
                            <i class="fas fa-print"></i> Print
                        </button>
                        <button class="btn btn-secondary" id="pdfBtn">
                            <i class="fas fa-file-pdf"></i> PDF
                        </button>
                        <button class="btn btn-secondary" id="excelBtn">
                            <i class="fas fa-file-excel"></i> Excel
                        </button>
                        <button class="btn btn-secondary" id="csvBtn">
                            <i class="fas fa-file-csv"></i> CSV
                        </button>
                    </div>
                    
                    <div style="margin-top: 25px;">
                        <h3 class="card-title"><i class="fas fa-share-alt"></i> Share Results</h3>
                        <div class="social-sharing">
                            <div class="social-btn facebook" title="Share on Facebook">
                                <i class="fab fa-facebook-f"></i>
                            </div>
                            <div class="social-btn twitter" title="Share on Twitter">
                                <i class="fab fa-twitter"></i>
                            </div>
                            <div class="social-btn linkedin" title="Share on LinkedIn">
                                <i class="fab fa-linkedin-in"></i>
                            </div>
                            <div class="social-btn email" title="Share via Email">
                                <i class="fas fa-envelope"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Ad Slot -->
        <div class="ad-container">
            <div class="ad-label">Advertisement</div>
            <div class="ad-content">
                <!-- Yllix Ad Code -->
                <div style="width: 100%; height: 250px; background: #f0f5ff; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                    <span style="color: #2563eb; font-weight: 600;">Yllix Ad Slot (300x250)</span>
                </div>
            </div>
        </div>
        
        <div class="disclaimer">
            <strong>Security & Compliance:</strong> All calculations are performed locally in your browser. No financial data is stored or transmitted. This tool complies with GDPR and CCPA regulations. RMD calculations based on current IRS regulations as of 2023. Consult a tax professional for personalized advice.
        </div>
        
        <footer>
            <p>© 2023 RMD Pro Financial Tools | SSL/TLS Secured | Privacy Policy</p>
            <p>Required Minimum Distribution Calculator v2.1 | Updated for SECURE Act 2.0</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const calculateBtn = document.getElementById('calculateBtn');
        const resetBtn = document.getElementById('resetBtn');
        const printBtn = document.getElementById('printBtn');
        const pdfBtn = document.getElementById('pdfBtn');
        const excelBtn = document.getElementById('excelBtn');
        const csvBtn = document.getElementById('csvBtn');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        // IRS Uniform Lifetime Table (simplified)
        const uniformLifetimeTable = {
            70: 27.4,
            71: 26.5,
            72: 25.6,
            73: 24.7,
            74: 23.8,
            75: 22.9,
            76: 22.0,
            77: 21.2,
            78: 20.3,
            79: 19.5,
            80: 18.7,
            81: 17.9,
            82: 17.1,
            83: 16.3,
            84: 15.5,
            85: 14.8,
            86: 14.1,
            87: 13.4,
            88: 12.7,
            89: 12.0,
            90: 11.4,
            91: 10.8,
            92: 10.2,
            93: 9.6,
            94: 9.1,
            95: 8.6,
            96: 8.1,
            97: 7.6,
            98: 7.1,
            99: 6.7
        };

        // Initialize the calculator
        document.addEventListener('DOMContentLoaded', () => {
            calculateRMD();
            
            // Set default birthdate to show age 69
            const today = new Date();
            const birthYear = today.getFullYear() - 69;
            document.getElementById('birthDate').value = `${birthYear}-01-15`;
        });

        // Tab switching functionality
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs and contents
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab
                tab.classList.add('active');
                
                // Show corresponding content
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(`${tabId}Tab`).classList.add('active');
            });
        });

        // Calculate button event listener
        calculateBtn.addEventListener('click', calculateRMD);

        // Reset button event listener
        resetBtn.addEventListener('click', () => {
            document.getElementById('accountBalance').value = 350000;
            document.getElementById('birthDate').value = "1955-01-15";
            document.getElementById('beneficiaryType').value = "spouse";
            document.getElementById('lifeExpectancy').value = "uniform";
            document.getElementById('spouseAge').value = "";
            
            calculateRMD();
        });

        // Print button event listener
        printBtn.addEventListener('click', () => {
            window.print();
        });

        // Export to PDF
        pdfBtn.addEventListener('click', () => {
            alert('PDF report generated successfully! In a production environment, this would download a PDF file with your RMD details.');
        });

        // Export to Excel
        excelBtn.addEventListener('click', () => {
            alert('Excel file exported successfully! In a production environment, this would download an Excel spreadsheet with your RMD calculations.');
        });

        // Export to CSV
        csvBtn.addEventListener('click', () => {
            alert('CSV file exported successfully! In a production environment, this would download a CSV file with your RMD projection.');
        });

        // Social sharing buttons
        document.querySelectorAll('.social-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const platform = btn.classList[1];
                let url = '';
                let message = 'Check out my Required Minimum Distribution calculations using RMD Pro Calculator!';
                
                switch(platform) {
                    case 'facebook':
                        url = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(window.location.href);
                        break;
                    case 'twitter':
                        url = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(message);
                        break;
                    case 'linkedin':
                        url = 'https://www.linkedin.com/sharing/share-offsite/?url=' + encodeURIComponent(window.location.href);
                        break;
                    case 'email':
                        url = 'mailto:?subject=RMD Calculation&body=' + encodeURIComponent(`${message}\n\nView my results: ${window.location.href}`);
                        break;
                }
                
                if(platform === 'email') {
                    window.location.href = url;
                } else {
                    window.open(url, '_blank', 'width=600,height=400');
                }
            });
        });

        // Main RMD calculation function
        function calculateRMD() {
            // Get input values
            const birthDate = new Date(document.getElementById('birthDate').value);
            const accountBalance = parseFloat(document.getElementById('accountBalance').value) || 0;
            const beneficiaryType = document.getElementById('beneficiaryType').value;
            const lifeExpectancy = document.getElementById('lifeExpectancy').value;
            const spouseAge = parseInt(document.getElementById('spouseAge').value) || 0;
            
            // Calculate age
            const today = new Date();
            const currentYear = today.getFullYear();
            const birthYear = birthDate.getFullYear();
            let age = currentYear - birthYear;
            
            // Adjust age if birthday hasn't occurred yet this year
            const birthMonth = birthDate.getMonth();
            const currentMonth = today.getMonth();
            if (currentMonth < birthMonth || (currentMonth === birthMonth && today.getDate() < birthDate.getDate())) {
                age--;
            }
            
            // Determine RMD age based on birth year (SECURE Act 2.0 rules)
            let rmdAge = 73;
            if (birthYear <= 1950) rmdAge = 72;
            if (birthYear <= 1949) rmdAge = 70.5;
            if (birthYear >= 1960) rmdAge = 75;
            
            // Calculate life expectancy factor
            let lifeExpectancyFactor = 0;
            
            if (lifeExpectancy === "uniform") {
                // Use Uniform Lifetime Table
                lifeExpectancyFactor = uniformLifetimeTable[Math.max(age, 70)] || 1;
            } else if (lifeExpectancy === "joint" && spouseAge > 0) {
                // Simplified joint calculation (actual IRS table is more complex)
                lifeExpectancyFactor = Math.max(age, 70) + spouseAge - 70;
            } else {
                // Single Life Expectancy (simplified)
                lifeExpectancyFactor = 120 - age;
            }
            
            // Calculate RMD
            const rmd = accountBalance / lifeExpectancyFactor;
            
            // Calculate RMD deadline (April 1 of the year after turning RMD age)
            const rmdDeadlineYear = birthYear + rmdAge + 1;
            const rmdDeadline = `Apr 1, ${rmdDeadlineYear}`;
            
            // Update results in UI
            document.querySelectorAll('.result-value')[0].textContent = age;
            document.querySelectorAll('.result-value')[1].textContent = `$${rmd.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`;
            document.querySelectorAll('.result-value')[2].textContent = lifeExpectancyFactor.toFixed(1);
            document.querySelectorAll('.result-value')[3].textContent = rmdDeadline;
            
            // Update calculation details
            const detailsCard = document.querySelector('#summaryTab .result-card:last-child');
            detailsCard.querySelector('p:nth-child(2)').textContent = `Formula: Account Balance / Life Expectancy Factor`;
            detailsCard.querySelector('p:nth-child(3)').textContent = `Calculation: $${accountBalance.toLocaleString()} / ${lifeExpectancyFactor.toFixed(1)} = $${rmd.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`;
            
            let tableUsed = "Uniform Lifetime Table";
            if (lifeExpectancy === "joint") tableUsed = "Joint and Last Survivor Table";
            if (lifeExpectancy === "single") tableUsed = "Single Life Expectancy Table";
            detailsCard.querySelector('p:nth-child(4)').textContent = `Table Used: ${tableUsed}`;
            
            let note = "Your first RMD must be taken by April 1 of the year after you turn 72.";
            if (rmdAge === 73) note = "Your first RMD must be taken by April 1 of the year after you turn 73.";
            if (rmdAge === 75) note = "Your first RMD must be taken by April 1 of the year after you turn 75.";
            detailsCard.querySelector('p:nth-child(5)').textContent = `Important Note: ${note}`;
        }
    </script>
</body>
</html>